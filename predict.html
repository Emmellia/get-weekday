<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/static/style.css" />
    <title>Predict Day of Week</title>
    <script>
      window.onload = function () {
        populateDayDropdown();
      };

      function populateDayDropdown() {
        const dayDropdown = document.getElementById("day");

        for (let i = 1; i <= 31; i++) {
          const option = document.createElement("option");
          option.value = i;
          option.innerText = i;
          dayDropdown.appendChild(option);
        }
      }

      async function submitForm(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const data = {
          year: formData.get("year"),
          month: formData.get("month"),
          day: formData.get("day"),
          numYear: formData.get("numYear"),
          timePeriod: formData.get("timePeriod"),
        };

        const response = await fetch("/predict", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });

        const result = await response.json();
        document.getElementById(
          "prediction"
        ).innerText = `Predicted day: ${result.predict}`;
      }
    </script>
  </head>
  <body>
    <nav>
      <img
        class="logo"
        src="/static/datelogo2.png"
        alt="image of a date logo"
      />
    </nav>
    <main>
      <div class="header">
        <h1>Weekday Calculator: What day is it?</h1>
        <p>
          Use the calculator below to find the day of the week of any date. It
          also gives out a few facts as well!
        </p>
      </div>
      <div class="container">
        <form onsubmit="submitForm(event)">
          <label for="year">Year:</label>
          <input
            type="text"
            pattern="\d*"
            title="Only numbers allowed"
            id="year"
            name="year"
            required
          /><br /><br />
          <label for="month">Month:</label>
          <select id="month" name="month" required>
            <option value="">Select a Month</option>
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option></select
          ><br /><br />

          <label for="day">Day:</label>
          <select id="day" name="day" required>
            <option value="">Select a Day</option></select
          ><br /><br />

          <label for="numYear">Num Year:</label>
          <input
            type="text"
            pattern="\d*"
            title="Only numbers allowed"
            id="numYear"
            name="numYear"
            required
          /><br /><br />

          <label for="timePeriod">Time Period:</label>
          <select id="timePeriod" name="timePeriod" required>
            <option value="">Select a time period</option>
            <option value="future">Future</option>
            <option value="past">Past</option>
          </select>
          <br /><br />

          <input type="submit" value="Predict Day" />
        </form>

        <div id="prediction"></div>
      </div>
    </main>
  </body>
</html>
